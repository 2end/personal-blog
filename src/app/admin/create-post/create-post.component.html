<div class="container">
  <h1>Create post</h1>

  <form autocomplete="off" [formGroup]="createPostForm" (ngSubmit)="onSubmit()">
    <div class="flex-wrapper">
      <div class="flex-items-wrapper">
        <mat-form-field class="full-width">
          <input type="text" #title matInput required autofocus formControlName="title" placeholder="Title">
        </mat-form-field>
        <mat-form-field class="full-width">
          <input type="text" #description matInput required formControlName="description" placeholder="Description">
        </mat-form-field>
        <input type="file" formControlName="image" required (change)="handleFileSelect($event)">
        <mat-form-field class="full-width">
          <textarea rows="23" #content matInput required formControlName="content" placeholder="Content"></textarea>
        </mat-form-field>
      </div>
        <mat-card class="flex-items-wrapper">
          <mat-card-header>
            <mat-card-title>{{title.value || previewTitle}}</mat-card-title>
            <mat-card-subtitle>{{description.value || previewDescription}}</mat-card-subtitle>
          </mat-card-header>
          <img mat-card-image [src]="safeUrl || '../../assets/img/default-post-image.jpg'" alt="Image">
            <mat-card-content>
              <ng-scrollbar>
                <p class="post-preview-content-text" [innerHtml]="content.value"></p>
              </ng-scrollbar>  
            </mat-card-content>        
        </mat-card>
    </div>
    <button mat-raised-button color="primary" [disabled]="loading || !createPostForm.valid" type="submit">
      Create post
      <fa-icon [icon]="faSpinner" spin="true" *ngIf="loading"></fa-icon>
    </button>
    <p class="text-warn pad-v-sm text-center" *ngIf="failed">
      Could not create post.
    </p>
  </form>
</div>
